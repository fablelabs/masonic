{"version":3,"file":"masonic.dev.js","sources":["../../node_modules/@react-hook/debounce/node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/debounce/src/index.tsx","../../node_modules/@react-hook/passive-layout-effect/src/index.tsx","../../node_modules/@react-hook/window-size/node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/window-size/node_modules/@react-hook/event/src/index.tsx","../../node_modules/@react-hook/window-size/src/index.tsx","../../node_modules/@react-hook/throttle/node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/throttle/src/index.tsx","../../node_modules/@react-hook/window-scroll/node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/window-scroll/node_modules/@react-hook/event/src/index.tsx","../../node_modules/@react-hook/window-scroll/src/index.tsx","../../node_modules/@essentials/raf/src/index.ts","../../node_modules/@essentials/request-timeout/src/index.ts","../../src/use-scroller.ts","../../node_modules/trie-memoize/src/index.ts","../../node_modules/@essentials/one-key-map/src/index.ts","../../node_modules/@essentials/memoize-one/src/index.ts","../../node_modules/@react-hook/latest/src/index.tsx","../../src/elements-cache.ts","../../src/use-force-update.ts","../../src/use-masonry.tsx","../../src/masonry-scroller.tsx","../../src/use-container-position.ts","../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","../../node_modules/raf-schd/dist/raf-schd.esm.js","../../src/use-resize-observer.ts","../../src/interval-tree.ts","../../src/use-positioner.ts","../../node_modules/@react-hook/event/node_modules/@react-hook/latest/src/index.tsx","../../node_modules/@react-hook/event/src/index.tsx","../../src/use-scroll-to-index.ts","../../src/masonry.tsx","../../src/list.tsx","../../src/use-infinite-loader.ts"],"sourcesContent":["import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nexport const useDebounceCallback = <CallbackArgs extends any[]>(\n  callback: (...args: CallbackArgs) => void,\n  wait = 100,\n  leading = false\n): ((...args: CallbackArgs) => void) => {\n  const storedCallback = useLatest(callback)\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const deps = [wait, leading, storedCallback]\n  // Cleans up pending timeouts when the deps change\n  React.useEffect(\n    () => () => {\n      timeout.current && clearTimeout(timeout.current)\n      timeout.current = void 0\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const {current} = timeout\n    // Calls on leading edge\n    if (current === void 0 && leading) {\n      timeout.current = setTimeout(() => {\n        timeout.current = void 0\n      }, wait)\n      // eslint-disable-next-line prefer-spread\n      return storedCallback.current.apply(null, args as any)\n    }\n    // Clear the timeout every call and start waiting again\n    current && clearTimeout(current)\n    // Waits for `wait` before invoking the callback\n    timeout.current = setTimeout(() => {\n      timeout.current = void 0\n      storedCallback.current.apply(null, args as any)\n    }, wait)\n  }, deps)\n}\n\nexport const useDebounce = <State extends any>(\n  initialState: State | (() => State),\n  wait?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] => {\n  const state = React.useState(initialState)\n  return [state[0], useDebounceCallback(state[1], wait, leading)]\n}\n","import * as React from 'react'\n\nconst usePassiveLayoutEffect =\n  React[\n    typeof document !== 'undefined' && document.createElement !== void 0\n      ? 'useLayoutEffect'\n      : 'useEffect'\n  ]\n\nexport default usePassiveLayoutEffect\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(\n  target: any,\n  type: any,\n  listener: any,\n  cleanup: any = noop\n): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    const listener = function (this: any, ...args: any[]) {\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      targetEl.removeEventListener(type, listener)\n      cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import {useDebounce} from '@react-hook/debounce'\nimport useEvent from '@react-hook/event'\n\nconst emptyObj = {}\n\nexport interface DebouncedWindowSizeOptions {\n  initialWidth?: number\n  initialHeight?: number\n  wait?: number\n  leading?: boolean\n}\n\nconst win = typeof window === 'undefined' ? null : window\nconst getSize = () =>\n  [\n    document.documentElement.clientWidth,\n    document.documentElement.clientHeight,\n  ] as const\n\nexport const useWindowSize = (\n  options: DebouncedWindowSizeOptions = emptyObj\n): readonly [number, number] => {\n  const {wait, leading, initialWidth = 0, initialHeight = 0} = options\n  const [size, setDebouncedSize] = useDebounce<readonly [number, number]>(\n    /* istanbul ignore next */\n    typeof document === 'undefined' ? [initialWidth, initialHeight] : getSize,\n    wait,\n    leading\n  )\n  const setSize = (): void => setDebouncedSize(getSize)\n\n  useEvent(win, 'resize', setSize)\n  useEvent(win, 'orientationchange', setSize)\n\n  return size\n}\n\nexport const useWindowHeight = (\n  options?: Omit<DebouncedWindowSizeOptions, 'initialWidth'>\n): number => useWindowSize(options)[1]\n\nexport const useWindowWidth = (\n  options?: Omit<DebouncedWindowSizeOptions, 'initialHeight'>\n): number => useWindowSize(options)[0]\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\nconst perf = typeof performance !== 'undefined' ? performance : Date\nconst now = () => perf.now()\n\nexport function useThrottleCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  fps = 30,\n  leading = false\n): (...args: CallbackArguments) => void {\n  const storedCallback = useLatest(callback)\n  const ms = 1000 / fps\n  const prev = React.useRef(0)\n  const trailingTimeout = React.useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () =>\n    trailingTimeout.current && clearTimeout(trailingTimeout.current)\n  const deps = [fps, leading, storedCallback]\n\n  // Reset any time the deps change\n  React.useEffect(\n    () => () => {\n      prev.current = 0\n      clearTrailing()\n    },\n    deps\n  )\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    const args = arguments\n    const rightNow = now()\n    const call = () => {\n      prev.current = rightNow\n      clearTrailing()\n      storedCallback.current.apply(null, args as any)\n    }\n    const current = prev.current\n    // leading\n    if (leading && current === 0) return call()\n    // body\n    if (rightNow - current > ms) {\n      if (current > 0) return call()\n      prev.current = rightNow\n    }\n    // trailing\n    clearTrailing()\n    trailingTimeout.current = setTimeout(() => {\n      call()\n      prev.current = 0\n    }, ms)\n  }, deps)\n}\n\nexport function useThrottle<State>(\n  initialState: State | (() => State),\n  fps?: number,\n  leading?: boolean\n): [State, React.Dispatch<React.SetStateAction<State>>] {\n  const state = React.useState<State>(initialState)\n  return [state[0], useThrottleCallback(state[1], fps, leading)]\n}\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(\n  target: any,\n  type: any,\n  listener: any,\n  cleanup: any = noop\n): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    const listener = function (this: any, ...args: any[]) {\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      targetEl.removeEventListener(type, listener)\n      cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nfunction noop() {}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import {useThrottle} from '@react-hook/throttle'\nimport useEvent from '@react-hook/event'\n\nconst win = typeof window === 'undefined' ? null : window\nconst getScrollY = (): number =>\n  (win as Window).scrollY !== void 0\n    ? (win as Window).scrollY\n    : (win as Window).pageYOffset === void 0\n    ? 0\n    : (win as Window).pageYOffset\n\nexport const useWindowScroll = (fps = 30): number => {\n  const state = useThrottle(\n    typeof window === 'undefined' ? 0 : getScrollY,\n    fps,\n    true\n  )\n  useEvent(win, 'scroll', (): void => state[1](getScrollY()))\n  return state[0]\n}\n\nexport default useWindowScroll\n","export type Raf = (callback: (timestamp: number) => void) => number\nexport type Caf = (handle: number) => void\n\nlet u = 'undefined',\n  win = typeof window !== u ? window : ({} as any),\n  p = typeof performance !== u ? performance : Date,\n  now = () => p.now(),\n  af = 'AnimationFrame' as const,\n  Caf = 'cancel' + af,\n  Raf = 'request' + af,\n  raf: Raf = win[Raf] && win[Raf].bind(win),\n  caf: Caf = win[Caf] && win[Caf].bind(win)\n\nif (!raf || !caf) {\n  let lastTime = 0\n  raf = (callback: FrameRequestCallback) => {\n    let curr = now(),\n      next = Math.max(lastTime + 1000 / 60, curr)\n    return setTimeout(() => {\n      callback((lastTime = next))\n    }, next - curr) as any\n  }\n  caf = (h) => clearTimeout(h)\n}\n\nexport {raf, caf, now}\n","/**\n * Copyright 2011, Joe Lambert.\n * Free to use under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n **/\nimport {raf, caf, now} from '@essentials/raf'\n\nexport interface RequestTimeoutHandle {\n  v?: number\n}\n\nexport const clearRequestTimeout = (handle: RequestTimeoutHandle): void => {\n  caf(handle.v || -1)\n}\n\nexport const requestTimeout = (\n  fn: (...args: any[]) => void,\n  ms: number\n): RequestTimeoutHandle => {\n  const start = now(),\n    handle: RequestTimeoutHandle = {}\n\n  const loop = () => {\n    now() - start >= ms ? fn.call(null) : (handle.v = raf(loop))\n  }\n\n  handle.v = raf(loop)\n  return handle\n}\n\nexport default requestTimeout\n","import * as React from 'react'\nimport useScrollPosition from '@react-hook/window-scroll'\nimport {requestTimeout, clearRequestTimeout} from '@essentials/request-timeout'\n\n/**\n * A hook for tracking whether the `window` is currently being scrolled and it's scroll position on\n * the y-axis. These values are used for determining which grid cells to render and when\n * to add styles to the masonry container that maximize scroll performance.\n *\n * @param offset The vertical space in pixels between the top of the grid container and the top\n *  of the browser `document.documentElement`.\n * @param fps This determines how often (in frames per second) to update the scroll position of the\n *  browser `window` in state, and as a result the rate the masonry grid recalculates its visible cells.\n *  The default value of `12` has been very reasonable in my own testing, but if you have particularly\n *  heavy `render` components it may be prudent to reduce this number.\n */\nexport function useScroller(\n  offset = 0,\n  fps = 12\n): {scrollTop: number; isScrolling: boolean} {\n  const scrollTop = useScrollPosition(fps)\n  const [isScrolling, setIsScrolling] = React.useState(false)\n  const didMount = React.useRef(0)\n\n  React.useEffect(() => {\n    if (didMount.current === 1) setIsScrolling(true)\n    const to = requestTimeout(() => {\n      // This is here to prevent premature bail outs while maintaining high resolution\n      // unsets. Without it there will always bee a lot of unnecessary DOM writes to style.\n      setIsScrolling(false)\n    }, 40 + 1000 / fps)\n    didMount.current = 1\n    return () => clearRequestTimeout(to)\n  }, [fps, scrollTop])\n\n  return {scrollTop: Math.max(0, scrollTop - offset), isScrolling}\n}\n","export interface MapLike {\n  new (...args: any[]): any\n}\n\nexport type CacheConstructor =\n  | MapConstructor\n  | WeakMapConstructor\n  | MapLike\n  | Record<any, any>\n\ninterface Cache<K = any, V = any> {\n  set: (k: K, v: V) => V\n  get: (k: K) => V\n}\n\nconst createCache = (obj: CacheConstructor): Cache => {\n  try {\n    // @ts-ignore\n    return new obj()\n  } catch (e) {\n    const cache: Record<string, any> = {}\n\n    return {\n      set(k, v): void {\n        cache[k] = v\n      },\n      get(k): any {\n        return cache[k]\n      },\n    }\n  }\n}\n\nconst memo = (\n  constructors: CacheConstructor[]\n): {s: Cache['set']; g: Cache['get']} => {\n  const depth = constructors.length,\n    baseCache = createCache(constructors[0])\n  let base: any\n  let map: any\n  let i: number\n  let node: typeof baseCache\n  const one = depth === 1\n  // quicker access for one and two-argument functions\n  const g1 = (args: IArguments): any =>\n    (base = baseCache.get(args[0])) === void 0 || one ? base : base.get(args[1])\n  const s1 = (args: IArguments, value: any): any => {\n    if (one) baseCache.set(args[0], value)\n    else {\n      if ((base = baseCache.get(args[0])) === void 0) {\n        map = createCache(constructors[1])\n        map.set(args[1], value)\n        baseCache.set(args[0], map)\n      } else {\n        base.set(args[1], value)\n      }\n    }\n\n    return value\n  }\n\n  const g2 = (args: IArguments): any => {\n    node = baseCache\n\n    for (i = 0; i < depth; i++)\n      if ((node = node.get(args[i])) === void 0) return\n\n    return node\n  }\n\n  const s2 = (args: IArguments, value: any): any => {\n    node = baseCache\n\n    for (i = 0; i < depth - 1; i++) {\n      if ((map = node.get(args[i])) === void 0) {\n        map = createCache(constructors[i + 1])\n        node.set(args[i], map)\n        node = map\n      } else {\n        node = map\n      }\n    }\n\n    node.set(args[depth - 1], value)\n    return value\n  }\n\n  return depth < 3 ? {g: g1, s: s1} : {g: g2, s: s2}\n}\n\nconst memoize = <T extends any[], U extends any>(\n  mapConstructors: CacheConstructor[],\n  fn: (...args: T) => U\n): ((...args: T) => U) => {\n  let item: U\n  const {g, s} = memo(mapConstructors)\n  return function () {\n    return (item = g(arguments)) === void 0\n      ? s(arguments, fn.apply(null, arguments as any))\n      : item\n  }\n}\n\nexport default memoize\n","class OneKeyMap<K extends any = any, V extends any = any> {\n  set: (k: K, v: V) => void\n  get: (k: K) => V | undefined\n\n  constructor() {\n    let key: K | undefined, val: V | undefined\n    this.get = (k: K): V | undefined => (k === key ? val : void 0)\n    this.set = (k: K, v: V): void => {\n      key = k\n      val = v\n    }\n  }\n}\n\nexport default OneKeyMap\n","const memoOne = <Args extends any[], T extends any>(\n  fn: (...args: Args) => T,\n  areEqual?: AreEqual<Args>\n): OutputFunction<Args, T> => {\n  const equal = areEqual || defaultAreEqual\n  let args: Args, value: any\n\n  return function (): T {\n    return !!args && equal(arguments as any, args)\n      ? value\n      : (value = fn.apply(null, (args = arguments as any)))\n  } as OutputFunction<Args, T>\n}\n\nexport default memoOne\n\nconst defaultAreEqual = (\n  current: IArguments,\n  prev: IArguments | any[]\n): boolean =>\n  current[0] === prev[0] &&\n  current[1] === prev[1] &&\n  current[2] === prev[2] &&\n  current[3] === prev[3]\n\nexport type AreEqual<Args> = (currentArgs: Args, prevArgs: Args) => boolean\nexport type InputFunction = (...args: any[]) => any\nexport type OutputFunction<Args extends any[], T extends any> = (\n  ...args: Args\n) => T\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  React.useEffect(() => {\n    storedValue.current = current\n  })\n  return storedValue\n}\n\nexport default useLatest\n","export const elementsCache: WeakMap<Element, number> = new WeakMap()\n","import * as React from 'react'\n\nexport function useForceUpdate() {\n  const setState = React.useState(emptyObj)[1]\n  return React.useRef(() => setState({})).current\n}\n\nconst emptyObj = {}\n","import * as React from 'react'\nimport trieMemoize from 'trie-memoize'\nimport OneKeyMap from '@essentials/one-key-map'\nimport memoizeOne from '@essentials/memoize-one'\nimport useLatest from '@react-hook/latest'\nimport {elementsCache} from './elements-cache'\nimport {useForceUpdate} from './use-force-update'\nimport {Positioner} from './use-positioner'\n\n/**\n * This hook handles the render phases of the masonry layout and returns the grid as a React element.\n *\n * @param options Options for configuring the masonry layout renderer. See `UseMasonryOptions`.\n */\nexport function useMasonry<Item> ({\n  // Measurement and layout\n  positioner,\n  resizeObserver,\n  // Grid items\n  items,\n  // Container props\n  as: ContainerComponent = 'div',\n  id,\n  key,\n  className,\n  style,\n  role = 'grid',\n  tabIndex = 0,\n  containerRef,\n  // Item props\n  itemAs: ItemComponent = 'div',\n  itemStyle,\n  itemHeightEstimate = 300,\n  itemKey = defaultGetItemKey,\n  // Rendering props\n  overscanBy = 2,\n  scrollTop,\n  isScrolling,\n  height,\n  render: RenderComponent,\n  onRender\n}: UseMasonryOptions<Item>) {\n  let startIndex = 0\n  let stopIndex: number | undefined\n  const forceUpdate = useForceUpdate()\n  const setItemRef = getRefSetter(positioner, resizeObserver)\n  const itemCount = items.length\n  const {\n    columnWidth,\n    columnCount,\n    range,\n    estimateHeight,\n    size,\n    shortestColumn\n  } = positioner\n  const measuredCount = size()\n  const shortestColumnSize = shortestColumn()\n  const children: React.ReactElement[] = []\n  const itemRole =\n    role === 'list' ? 'listitem' : role === 'grid' ? 'gridcell' : undefined\n  const storedOnRender = useLatest(onRender)\n\n  overscanBy = height * overscanBy\n  const rangeEnd = scrollTop + overscanBy\n  const needsFreshBatch =\n    shortestColumnSize < rangeEnd && measuredCount < itemCount\n\n  range(\n    // We overscan in both directions because users scroll both ways,\n    // though one must admit scrolling down is more common and thus\n    // we only overscan by half the downward overscan amount\n    Math.max(0, scrollTop - overscanBy / 2),\n    rangeEnd,\n    (index, left, top) => {\n      const data = items[index]\n      const key = itemKey(data, index)\n      const phaseTwoStyle: React.CSSProperties = {\n        top,\n        left,\n        width: columnWidth,\n        writingMode: 'horizontal-tb',\n        position: 'absolute'\n      }\n\n      /* istanbul ignore next */\n      if (\n        typeof process !== 'undefined' &&\n        process.env.NODE_ENV !== 'production'\n      ) {\n        throwWithoutData(data, index)\n      }\n\n      children.push(\n        <ItemComponent\n          key={key}\n          ref={setItemRef(index)}\n          role={itemRole}\n          style={\n            typeof itemStyle === 'object' && itemStyle !== null\n              ? Object.assign({}, phaseTwoStyle, itemStyle)\n              : phaseTwoStyle\n          }\n        >\n          {createRenderElement(RenderComponent, index, data, columnWidth)}\n        </ItemComponent>\n      )\n\n      if (stopIndex === void 0) {\n        startIndex = index\n        stopIndex = index\n      } else {\n        startIndex = Math.min(startIndex, index)\n        stopIndex = Math.max(stopIndex, index)\n      }\n    }\n  )\n\n  if (needsFreshBatch) {\n    const batchSize = Math.min(\n      itemCount - measuredCount,\n      Math.ceil(\n        ((scrollTop + overscanBy - shortestColumnSize) / itemHeightEstimate) *\n          columnCount\n      )\n    )\n\n    let index = measuredCount\n    const phaseOneStyle = getCachedSize(columnWidth)\n\n    for (; index < measuredCount + batchSize; index++) {\n      const data = items[index]\n      const key = itemKey(data, index)\n\n      /* istanbul ignore next */\n      if (\n        typeof process !== 'undefined' &&\n        process.env.NODE_ENV !== 'production'\n      ) {\n        throwWithoutData(data, index)\n      }\n\n      children.push(\n        <ItemComponent\n          key={key}\n          ref={setItemRef(index)}\n          role={itemRole}\n          style={\n            typeof itemStyle === 'object'\n              ? Object.assign({}, phaseOneStyle, itemStyle)\n              : phaseOneStyle\n          }\n        >\n          {createRenderElement(RenderComponent, index, data, columnWidth)}\n        </ItemComponent>\n      )\n    }\n  }\n\n  // Calls the onRender callback if the rendered indices changed\n  React.useEffect(() => {\n    if (typeof storedOnRender.current === 'function' && stopIndex !== void 0)\n      storedOnRender.current(startIndex, stopIndex, items)\n\n    didEverMount = '1'\n  }, [startIndex, stopIndex, items, storedOnRender])\n  // If we needed a fresh batch we should reload our components with the measured\n  // sizes\n  React.useEffect(() => {\n    if (needsFreshBatch) forceUpdate()\n    // eslint-disable-next-line\n  }, [needsFreshBatch])\n\n  // gets the container style object based upon the estimated height and whether or not\n  // the page is being scrolled\n  const containerStyle = getContainerStyle(\n    isScrolling,\n    estimateHeight(itemCount, itemHeightEstimate)\n  )\n\n  return (\n    <ContainerComponent\n      ref={containerRef}\n      key={`${key || ''}-${didEverMount}`}\n      id={id}\n      role={role}\n      className={className}\n      tabIndex={tabIndex}\n      style={\n        typeof style === 'object'\n          ? assignUserStyle(containerStyle, style)\n          : containerStyle\n      }\n      children={children}\n    />\n  )\n}\n\n/* istanbul ignore next */\nfunction throwWithoutData (data: any, index: number) {\n  if (!data) {\n    throw new Error(\n      `No data was found at index: ${index}\\n\\n` +\n        `This usually happens when you've mutated or changed the \"items\" array in a ` +\n        `way that makes it shorter than the previous \"items\" array. Masonic knows nothing ` +\n        `about your underlying data and when it caches cell positions, it assumes you aren't ` +\n        `mutating the underlying \"items\".\\n\\n` +\n        `See https://codesandbox.io/s/masonic-w-react-router-example-2b5f9?file=/src/index.js for ` +\n        `an example that gets around this limitations. For advanced implementations, see ` +\n        `https://codesandbox.io/s/masonic-w-react-router-and-advanced-config-example-8em42?file=/src/index.js\\n\\n` +\n        `If this was the result of your removing an item from your \"items\", see this issue: ` +\n        `https://github.com/jaredLunde/masonic/issues/12`\n    )\n  }\n}\n\n// This is for triggering a remount after SSR has loaded in the client w/ hydrate()\nlet didEverMount = '0'\n\nexport interface UseMasonryOptions<Item> {\n  /**\n   * An array containing the data used by the grid items.\n   */\n  items: Item[]\n  /**\n   * A grid cell positioner and cache created by the `usePositioner()` hook or\n   * the `createPositioner` utility.\n   */\n  positioner: Positioner\n  /**\n   * A resize observer that tracks mutations to the grid cells and forces the\n   * Masonry grid to recalculate its layout if any cells affect column heights\n   * change. Check out the `useResizeObserver()` hook.\n   */\n  resizeObserver?: {\n    observe: ResizeObserver['observe']\n    disconnect: ResizeObserver['observe']\n    unobserve: ResizeObserver['unobserve']\n  }\n  /**\n   * This is the type of element the grid container will be rendered as.\n   * @default \"div\"`\n   */\n  as?: keyof JSX.IntrinsicElements | React.ComponentType<any>\n  /**\n   * Optionally gives the grid container an `id` prop.\n   */\n  id?: string\n  /**\n   * Prefix to key used for forcing re-renders\n   */\n  key?: string\n  /**\n   * Optionally gives the grid container a `className` prop.\n   */\n  className?: string\n  /**\n   * Adds extra `style` attributes to the container in addition to those\n   * created by the `useMasonry()` hook.\n   */\n  style?: React.CSSProperties\n  /**\n   * Optionally swap out the accessibility `role` prop of the container and its items.\n   * @default \"grid\"\n   */\n  role?: 'grid' | 'list'\n  /**\n   * Change the `tabIndex` of the grid container.\n   * @default 0\n   */\n  tabIndex?: number\n  /**\n   * Forwards a React ref to the grid container.\n   */\n  containerRef?:\n    | ((element: HTMLElement) => void)\n    | React.MutableRefObject<HTMLElement | null>\n  /**\n   * This is the type of element the grid items will be rendered as.\n   * @default \"div\"\n   */\n  itemAs?: keyof JSX.IntrinsicElements | React.ComponentType<any>\n  /**\n   * Adds extra `style` attributes to the grid items in addition to those\n   * created by the `useMasonry()` hook.\n   */\n  itemStyle?: React.CSSProperties\n  /**\n   * This value is used for estimating the initial height of the masonry grid. It is important for\n   * the UX of the scrolling behavior and in determining how many `items` to render in a batch, so it's\n   * wise to set this value with some level accuracy, though it doesn't need to be perfect.\n   * @default 300\n   */\n  itemHeightEstimate?: number\n  /**\n   * The value returned here must be unique to the item. By default, the key is the item's index. This is ok\n   * if your collection of items is never modified. Setting this property ensures that the component in `render`\n   * is reused each time the masonry grid is reflowed. A common pattern would be to return the item's database\n   * ID here if there is one, e.g. `data => data.id`\n   * @default (data, index) => index`\n   */\n  itemKey?: (data: Item, index: number) => string | number\n  /**\n   * This number is used for determining the number of grid cells outside of the visible window to render.\n   * The default value is `2` which means \"render 2 windows worth (2 * `height`) of content before and after\n   * the items in the visible window\". A value of `3` would be 3 windows worth of grid cells, so it's a\n   * linear relationship.\n   *\n   * Overscanning is important for preventing tearing when scrolling through items in the grid, but setting\n   * too high of a vaimport { useForceUpdate } from './use-force-update';\nlue may create too much work for React to handle, so it's best that you tune this\n   * value accordingly.\n   * @default 2\n   */\n  overscanBy?: number\n\n  /**\n   * This is the height of the window. If you're rendering the grid relative to the browser `window`,\n   * the current `document.documentElement.clientHeight` is the value you'll want to set here. If you're\n   * rendering the grid inside of another HTML element, you'll want to provide the current `element.offsetHeight`\n   * here.\n   */\n  height: number\n  /**\n   * The current scroll progress in pixel of the window the grid is rendered in. If you're rendering\n   * the grid relative to the browser `window`, you'll want the most current `window.scrollY` here.\n   * If you're rendering the grid inside of another HTML element, you'll want the current `element.scrollTop`\n   * value here. The `useScroller()` hook and `<MasonryScroller>` components will help you if you're\n   * rendering the grid relative to the browser `window`.\n   */\n  scrollTop: number\n  /**\n   * This property is used for determining whether or not the grid container should add styles that\n   * dramatically increase scroll performance. That is, turning off `pointer-events` and adding a\n   * `will-change: contents;` value to the style string. You can forgo using this prop, but I would\n   * not recommend that. The `useScroller()` hook and `<MasonryScroller>` components will help you if\n   * you're rendering the grid relative to the browser `window`.\n   * @default false\n   */\n  isScrolling?: boolean\n  /**\n   * This component is rendered for each item of your `items` prop array. It should accept three props:\n   * `index`, `width`, and `data`. See RenderComponentProps.\n   */\n  render: React.ComponentType<RenderComponentProps<Item>>\n  /**\n   * This callback is invoked any time the items currently being rendered by the grid change.\n   */\n  onRender?: (startIndex: number, stopIndex: number, items: Item[]) => void\n}\n\nexport interface RenderComponentProps<Item> {\n  /**\n   * The index of the cell in the `items` prop array.\n   */\n  index: number\n  /**\n   * The rendered width of the cell's column.\n   */\n  width: number\n  /**\n   * The data at `items[index]` of your `items` prop array.\n   */\n  data: Item\n}\n\n//\n// Render-phase utilities\n\n// ~5.5x faster than createElement without the memo\nconst createRenderElement = trieMemoize(\n  [OneKeyMap, {}, WeakMap, OneKeyMap],\n  (RenderComponent, index, data, columnWidth) => (\n    <RenderComponent index={index} data={data} width={columnWidth} />\n  )\n)\n\nconst getContainerStyle = memoizeOne(\n  (isScrolling: boolean | undefined, estimateHeight: number) => ({\n    position: 'relative',\n    width: '100%',\n    maxWidth: '100%',\n    height: Math.ceil(estimateHeight),\n    maxHeight: Math.ceil(estimateHeight),\n    willChange: isScrolling ? 'contents' : void 0,\n    pointerEvents: isScrolling ? 'none' : void 0\n  })\n)\n\nconst cmp2 = (args: IArguments, pargs: IArguments | any[]): boolean =>\n  args[0] === pargs[0] && args[1] === pargs[1]\n\nconst assignUserStyle = memoizeOne(\n  (containerStyle, userStyle) => Object.assign({}, containerStyle, userStyle),\n  // @ts-ignore\n  cmp2\n)\n\nfunction defaultGetItemKey<Item> (_: Item, i: number) {\n  return i\n}\n\n// the below memoizations for for ensuring shallow equal is reliable for pure\n// component children\nconst getCachedSize = memoizeOne(\n  (width: number): React.CSSProperties => ({\n    width,\n    zIndex: -1000,\n    visibility: 'hidden',\n    position: 'absolute',\n    writingMode: 'horizontal-tb'\n  }),\n  (args, pargs) => args[0] === pargs[0]\n)\n\nconst getRefSetter = memoizeOne(\n  (\n    positioner: Positioner,\n    resizeObserver?: UseMasonryOptions<any>['resizeObserver']\n  ) => (index: number) => (el: HTMLElement | null): void => {\n    if (el === null) return\n    if (resizeObserver) {\n      resizeObserver.observe(el)\n      elementsCache.set(el, index)\n    }\n    if (positioner.get(index) === void 0) positioner.set(index, el.offsetHeight)\n  },\n  // @ts-ignore\n  cmp2\n)\n","import {useScroller} from './use-scroller'\nimport {useMasonry} from './use-masonry'\nimport type {UseMasonryOptions} from './use-masonry'\n/**\n * A heavily-optimized component that updates `useMasonry()` when the scroll position of the browser `window`\n * changes. This bare-metal component is used by `<Masonry>` under the hood.\n */\nexport function MasonryScroller<Item>(props: MasonryScrollerProps<Item>) {\n  // We put this in its own layer because it's the thing that will trigger the most updates\n  // and we don't want to slower ourselves by cycling through all the functions, objects, and effects\n  // of other hooks\n  const {scrollTop, isScrolling} = useScroller(props.offset, props.scrollFps)\n  // This is an update-heavy phase and while we could just Object.assign here,\n  // it is way faster to inline and there's a relatively low hit to he bundle\n  // size.\n  return useMasonry<Item>({\n    scrollTop,\n    isScrolling,\n    positioner: props.positioner,\n    resizeObserver: props.resizeObserver,\n    items: props.items,\n    onRender: props.onRender,\n    as: props.as,\n    id: props.id,\n    className: props.className,\n    style: props.style,\n    role: props.role,\n    tabIndex: props.tabIndex,\n    containerRef: props.containerRef,\n    itemAs: props.itemAs,\n    itemStyle: props.itemStyle,\n    itemHeightEstimate: props.itemHeightEstimate,\n    itemKey: props.itemKey,\n    overscanBy: props.overscanBy,\n    height: props.height,\n    render: props.render,\n  })\n}\n\nexport interface MasonryScrollerProps<Item>\n  extends Omit<UseMasonryOptions<Item>, 'scrollTop' | 'isScrolling'> {\n  /**\n   * This determines how often (in frames per second) to update the scroll position of the\n   * browser `window` in state, and as a result the rate the masonry grid recalculates its visible cells.\n   * The default value of `12` has been very reasonable in my own testing, but if you have particularly\n   * heavy `render` components it may be prudent to reduce this number.\n   * @default 12\n   */\n  scrollFps?: number\n  /**\n   * The vertical space in pixels between the top of the grid container and the top\n   * of the browser `document.documentElement`.\n   * @default 0\n   */\n  offset?: number\n}\n\nif (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n  MasonryScroller.displayName = 'MasonryScroller'\n}\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\n\n/**\n * A hook for measuring the width of the grid container, as well as its distance\n * from the top of the document. These values are necessary to correctly calculate the number/width\n * of columns to render, as well as the number of rows to render.\n *\n * @param elementRef A `ref` object created by `React.useRef()`. That ref should be provided to the\n *   `containerRef` property in `useMasonry()`.\n * @param deps You can force this hook to recalculate the `offset` and `width` whenever this\n *   dependencies list changes. A common dependencies list might look like `[windowWidth, windowHeight]`,\n *   which would force the hook to recalculate any time the size of the browser `window` changed.\n */\nexport function useContainerPosition(\n  elementRef: React.MutableRefObject<HTMLElement | null>,\n  deps: React.DependencyList = emptyArr\n): ContainerPosition {\n  const [containerPosition, setContainerPosition] = React.useState<\n    ContainerPosition\n  >({offset: 0, width: 0})\n\n  useLayoutEffect(() => {\n    const {current} = elementRef\n    if (current !== null) {\n      let offset = 0\n      let el = current\n\n      do {\n        offset += el.offsetTop || 0\n        el = el.offsetParent as HTMLElement\n      } while (el)\n\n      if (\n        offset !== containerPosition.offset ||\n        current.offsetWidth !== containerPosition.width\n      ) {\n        setContainerPosition({\n          offset,\n          width: current.offsetWidth,\n        })\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps)\n\n  return containerPosition\n}\n\nexport interface ContainerPosition {\n  /**\n   * The distance in pixels between the top of the element in `elementRef` and the top of\n   * the `document.documentElement`.\n   */\n  offset: number\n  /**\n   * The `offsetWidth` of the element in `elementRef`.\n   */\n  width: number\n}\n\nconst emptyArr: [] = []\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","var rafSchd = function rafSchd(fn) {\n  var lastArgs = [];\n  var frameId = null;\n\n  var wrapperFn = function wrapperFn() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n\n    if (frameId) {\n      return;\n    }\n\n    frameId = requestAnimationFrame(function () {\n      frameId = null;\n      fn.apply(void 0, lastArgs);\n    });\n  };\n\n  wrapperFn.cancel = function () {\n    if (!frameId) {\n      return;\n    }\n\n    cancelAnimationFrame(frameId);\n    frameId = null;\n  };\n\n  return wrapperFn;\n};\n\nexport default rafSchd;\n","import * as React from 'react'\nimport trieMemoize from 'trie-memoize'\nimport ResizeObserver from 'resize-observer-polyfill'\nimport rafSchd from 'raf-schd'\nimport {elementsCache} from './elements-cache'\nimport {useForceUpdate} from './use-force-update'\nimport type {Positioner} from './use-positioner'\n\n/**\n * Creates a resize observer that forces updates to the grid cell positions when mutations are\n * made to cells affecting their height.\n *\n * @param positioner The masonry cell positioner created by the `usePositioner()` hook.\n */\nexport function useResizeObserver(positioner: Positioner) {\n  const forceUpdate = useForceUpdate()\n  const resizeObserver = createResizeObserver(positioner, forceUpdate)\n  // Cleans up the resize observers when they change or the\n  // component unmounts\n  React.useEffect(() => () => resizeObserver.disconnect(), [resizeObserver])\n  return resizeObserver\n}\n\n/**\n * Creates a resize observer that fires an `updater` callback whenever the height of\n * one or many cells change. The `useResizeObserver()` hook is using this under the hood.\n *\n * @param positioner A cell positioner created by the `usePositioner()` hook or the `createPositioner()` utility\n * @param updater A callback that fires whenever one or many cell heights change.\n */\nexport const createResizeObserver = trieMemoize(\n  [WeakMap],\n  // TODO: figure out a way to test this\n  /* istanbul ignore next */\n  (positioner: Positioner, updater: (updates: number[]) => void) => {\n    const handleEntries = rafSchd(((entries) => {\n      const updates: number[] = []\n      let i = 0\n\n      for (; i < entries.length; i++) {\n        const entry = entries[i]\n        const height = (entry.target as HTMLElement).offsetHeight\n\n        if (height > 0) {\n          const index = elementsCache.get(entry.target)\n\n          if (index !== void 0) {\n            const position = positioner.get(index)\n\n            if (position !== void 0 && height !== position.height)\n              updates.push(index, height)\n          }\n        }\n      }\n\n      if (updates.length > 0) {\n        // Updates the size/positions of the cell with the resize\n        // observer updates\n        positioner.update(updates)\n        updater(updates)\n      }\n    }) as ResizeObserverCallback)\n\n    const ro = new ResizeObserver(handleEntries)\n    // Overrides the original disconnect to include cancelling handling the entries.\n    // Ideally this would be its own method but that would result in a breaking\n    // change.\n    const disconnect = ro.disconnect.bind(ro)\n    ro.disconnect = () => {\n      disconnect()\n      handleEntries.cancel()\n    }\n\n    return ro\n  }\n)\n","type Color = 0 | 1 | 2\nconst RED = 0\nconst BLACK = 1\nconst NIL = 2\n\nconst DELETE = 0\nconst KEEP = 1\n\ntype ListNode = {\n  index: number\n  high: number\n  next: ListNode | null\n}\n\ninterface TreeNode {\n  max: number\n  low: number\n  high: number\n  // color\n  C: Color\n  // P\n  P: TreeNode\n  // right\n  R: TreeNode\n  // left\n  L: TreeNode\n  list: ListNode\n}\n\ninterface Tree {\n  root: TreeNode\n  size: number\n}\n\nfunction addInterval(treeNode: TreeNode, high: number, index: number): boolean {\n  let node: ListNode | null = treeNode.list\n  let prevNode: ListNode | undefined\n\n  while (node) {\n    if (node.index === index) return false\n    if (high > node.high) break\n    prevNode = node\n    node = node.next\n  }\n\n  if (!prevNode) treeNode.list = {index, high, next: node}\n  if (prevNode) prevNode.next = {index, high, next: prevNode.next}\n\n  return true\n}\n\nfunction removeInterval(treeNode: TreeNode, index: number) {\n  let node: ListNode | null = treeNode.list\n  if (node.index === index) {\n    if (node.next === null) return DELETE\n    treeNode.list = node.next\n    return KEEP\n  }\n\n  let prevNode: ListNode | undefined = node\n  node = node.next\n\n  while (node !== null) {\n    if (node.index === index) {\n      prevNode.next = node.next\n      return KEEP\n    }\n    prevNode = node\n    node = node.next\n  }\n}\n\nconst NULL_NODE: TreeNode = {\n  low: 0,\n  max: 0,\n  high: 0,\n  C: NIL,\n  // @ts-ignore\n  P: undefined,\n  // @ts-ignore\n  R: undefined,\n  // @ts-ignore\n  L: undefined,\n  // @ts-ignore\n  list: undefined,\n}\n\nNULL_NODE.P = NULL_NODE\nNULL_NODE.L = NULL_NODE\nNULL_NODE.R = NULL_NODE\n\nfunction updateMax(node: TreeNode) {\n  const max = node.high\n  if (node.L === NULL_NODE && node.R === NULL_NODE) node.max = max\n  else if (node.L === NULL_NODE) node.max = Math.max(node.R.max, max)\n  else if (node.R === NULL_NODE) node.max = Math.max(node.L.max, max)\n  else node.max = Math.max(Math.max(node.L.max, node.R.max), max)\n}\n\nfunction updateMaxUp(node: TreeNode) {\n  let x = node\n\n  while (x.P !== NULL_NODE) {\n    updateMax(x.P)\n    x = x.P\n  }\n}\n\nfunction rotateLeft(tree: Tree, x: TreeNode) {\n  if (x.R === NULL_NODE) return\n  const y = x.R\n  x.R = y.L\n  if (y.L !== NULL_NODE) y.L.P = x\n  y.P = x.P\n\n  if (x.P === NULL_NODE) tree.root = y\n  else {\n    if (x === x.P.L) x.P.L = y\n    else x.P.R = y\n  }\n\n  y.L = x\n  x.P = y\n\n  updateMax(x)\n  updateMax(y)\n}\n\nfunction rotateRight(tree: Tree, x: TreeNode) {\n  if (x.L === NULL_NODE) return\n  const y = x.L\n  x.L = y.R\n  if (y.R !== NULL_NODE) y.R.P = x\n  y.P = x.P\n\n  if (x.P === NULL_NODE) tree.root = y\n  else {\n    if (x === x.P.R) x.P.R = y\n    else x.P.L = y\n  }\n\n  y.R = x\n  x.P = y\n\n  updateMax(x)\n  updateMax(y)\n}\n\nfunction replaceNode(tree: Tree, x: TreeNode, y: TreeNode) {\n  if (x.P === NULL_NODE) tree.root = y\n  else if (x === x.P.L) x.P.L = y\n  else x.P.R = y\n  y.P = x.P\n}\n\nfunction fixRemove(tree: Tree, x: TreeNode) {\n  let w\n\n  while (x !== NULL_NODE && x.C === BLACK) {\n    if (x === x.P.L) {\n      w = x.P.R\n\n      if (w.C === RED) {\n        w.C = BLACK\n        x.P.C = RED\n        rotateLeft(tree, x.P)\n        w = x.P.R\n      }\n\n      if (w.L.C === BLACK && w.R.C === BLACK) {\n        w.C = RED\n        x = x.P\n      } else {\n        if (w.R.C === BLACK) {\n          w.L.C = BLACK\n          w.C = RED\n          rotateRight(tree, w)\n          w = x.P.R\n        }\n\n        w.C = x.P.C\n        x.P.C = BLACK\n        w.R.C = BLACK\n        rotateLeft(tree, x.P)\n        x = tree.root\n      }\n    } else {\n      w = x.P.L\n\n      if (w.C === RED) {\n        w.C = BLACK\n        x.P.C = RED\n        rotateRight(tree, x.P)\n        w = x.P.L\n      }\n\n      if (w.R.C === BLACK && w.L.C === BLACK) {\n        w.C = RED\n        x = x.P\n      } else {\n        if (w.L.C === BLACK) {\n          w.R.C = BLACK\n          w.C = RED\n          rotateLeft(tree, w)\n          w = x.P.L\n        }\n\n        w.C = x.P.C\n        x.P.C = BLACK\n        w.L.C = BLACK\n        rotateRight(tree, x.P)\n        x = tree.root\n      }\n    }\n  }\n\n  x.C = BLACK\n}\n\nfunction minimumTree(x: TreeNode) {\n  while (x.L !== NULL_NODE) x = x.L\n  return x\n}\n\nfunction fixInsert(tree: Tree, z: TreeNode) {\n  let y: TreeNode\n  while (z.P.C === RED) {\n    if (z.P === z.P.P.L) {\n      y = z.P.P.R\n\n      if (y.C === RED) {\n        z.P.C = BLACK\n        y.C = BLACK\n        z.P.P.C = RED\n        z = z.P.P\n      } else {\n        if (z === z.P.R) {\n          z = z.P\n          rotateLeft(tree, z)\n        }\n\n        z.P.C = BLACK\n        z.P.P.C = RED\n        rotateRight(tree, z.P.P)\n      }\n    } else {\n      y = z.P.P.L\n\n      if (y.C === RED) {\n        z.P.C = BLACK\n        y.C = BLACK\n        z.P.P.C = RED\n        z = z.P.P\n      } else {\n        if (z === z.P.L) {\n          z = z.P\n          rotateRight(tree, z)\n        }\n\n        z.P.C = BLACK\n        z.P.P.C = RED\n        rotateLeft(tree, z.P.P)\n      }\n    }\n  }\n  tree.root.C = BLACK\n}\n\nexport interface IIntervalTree {\n  insert(low: number, high: number, index: number): void\n  remove(index: number): void\n  search(\n    low: number,\n    high: number,\n    callback: (index: number, low: number) => any\n  ): void\n  size: number\n}\n\nexport function createIntervalTree(): IIntervalTree {\n  const tree = {\n    root: NULL_NODE,\n    size: 0,\n  }\n  // we know these indexes are a consistent, safe way to make look ups\n  // for our case so it's a solid O(1) alternative to\n  // the O(log n) searchNode() in typical interval trees\n  const indexMap: Record<number, TreeNode> = {}\n\n  return {\n    insert(low, high, index) {\n      let x: TreeNode = tree.root\n      let y: TreeNode = NULL_NODE\n\n      while (x !== NULL_NODE) {\n        y = x\n        if (low === y.low) break\n        if (low < x.low) x = x.L\n        else x = x.R\n      }\n\n      if (low === y.low && y !== NULL_NODE) {\n        if (!addInterval(y, high, index)) return\n        y.high = Math.max(y.high, high)\n        updateMax(y)\n        updateMaxUp(y)\n        indexMap[index] = y\n        tree.size++\n        return\n      }\n\n      const z: TreeNode = {\n        low,\n        high,\n        max: high,\n        C: RED,\n        P: y,\n        L: NULL_NODE,\n        R: NULL_NODE,\n        list: {index, high, next: null},\n      }\n\n      if (y === NULL_NODE) {\n        tree.root = z\n      } else {\n        if (z.low < y.low) y.L = z\n        else y.R = z\n        updateMaxUp(z)\n      }\n\n      fixInsert(tree, z)\n      indexMap[index] = z\n      tree.size++\n    },\n\n    remove(index) {\n      const z = indexMap[index]\n      if (z === void 0) return\n      delete indexMap[index]\n\n      const intervalResult = removeInterval(z, index)\n      if (intervalResult === void 0) return\n      if (intervalResult === KEEP) {\n        z.high = z.list.high\n        updateMax(z)\n        updateMaxUp(z)\n        tree.size--\n        return\n      }\n\n      let y = z\n      let originalYColor = y.C\n      let x: TreeNode\n\n      if (z.L === NULL_NODE) {\n        x = z.R\n        replaceNode(tree, z, z.R)\n      } else if (z.R === NULL_NODE) {\n        x = z.L\n        replaceNode(tree, z, z.L)\n      } else {\n        y = minimumTree(z.R)\n        originalYColor = y.C\n        x = y.R\n\n        if (y.P === z) {\n          x.P = y\n        } else {\n          replaceNode(tree, y, y.R)\n          y.R = z.R\n          y.R.P = y\n        }\n\n        replaceNode(tree, z, y)\n        y.L = z.L\n        y.L.P = y\n        y.C = z.C\n      }\n\n      updateMax(x)\n      updateMaxUp(x)\n\n      if (originalYColor === BLACK) fixRemove(tree, x)\n      tree.size--\n    },\n\n    search(low, high, callback) {\n      const stack = [tree.root]\n      while (stack.length !== 0) {\n        const node = stack.pop() as TreeNode\n        if (node === NULL_NODE || low > node.max) continue\n        if (node.L !== NULL_NODE) stack.push(node.L)\n        if (node.R !== NULL_NODE) stack.push(node.R)\n        if (node.low <= high && node.high >= low) {\n          let curr: ListNode | null = node.list\n          while (curr !== null) {\n            if (curr.high >= low) callback(curr.index, node.low)\n            curr = curr.next\n          }\n        }\n      }\n    },\n\n    get size() {\n      return tree.size\n    },\n  }\n}\n","import * as React from 'react'\nimport {createIntervalTree} from './interval-tree'\n\n/**\n * This hook creates the grid cell positioner and cache required by `useMasonry()`. This is\n * the meat of the grid's layout algorithm, determining which cells to render at a given scroll\n * position, as well as where to place new items in the grid.\n *\n * @param options Properties that determine the number of columns in the grid, as well\n *  as their widths.\n * @param deps This hook will create a new positioner, clearing all existing cached positions,\n *  whenever the dependencies in this list change.\n */\nexport function usePositioner(\n  {\n    width,\n    columnWidth = 200,\n    columnGutter = 0,\n    columnCount,\n  }: UsePositionerOptions,\n  deps: React.DependencyList = emptyArr\n): Positioner {\n  const initPositioner = (): Positioner => {\n    const [computedColumnWidth, computedColumnCount] = getColumns(\n      width,\n      columnWidth,\n      columnGutter,\n      columnCount\n    )\n    return createPositioner(\n      computedColumnCount,\n      computedColumnWidth,\n      columnGutter\n    )\n  }\n  const positionerRef = React.useRef<Positioner>()\n  if (positionerRef.current === undefined)\n    positionerRef.current = initPositioner()\n\n  const prevDeps = React.useRef(deps)\n  const opts = [width, columnWidth, columnGutter, columnCount]\n  const prevOpts = React.useRef(opts)\n  const optsChanged = !opts.every((item, i) => prevOpts.current[i] === item)\n\n  if (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n    if (deps.length !== prevDeps.current.length) {\n      throw new Error(\n        'usePositioner(): The length of your dependencies array changed.'\n      )\n    }\n  }\n\n  // Create a new positioner when the dependencies or sizes change\n  // Thanks to https://github.com/khmm12 for pointing this out\n  // https://github.com/jaredLunde/masonic/pull/41\n  if (optsChanged || !deps.every((item, i) => prevDeps.current[i] === item)) {\n    const prevPositioner = positionerRef.current\n    const positioner = initPositioner()\n    prevDeps.current = deps\n    prevOpts.current = opts\n\n    if (optsChanged) {\n      const cacheSize = prevPositioner.size()\n      for (let index = 0; index < cacheSize; index++) {\n        const pos = prevPositioner.get(index)\n        positioner.set(index, pos !== void 0 ? pos.height : 0)\n      }\n    }\n\n    positionerRef.current = positioner\n  }\n\n  return positionerRef.current\n}\n\nexport interface UsePositionerOptions {\n  /**\n   * The width of the container you're rendering the grid within, i.e. the container\n   * element's `element.offsetWidth`\n   */\n  width: number\n  /**\n   * The minimum column width. The `usePositioner()` hook will automatically size the\n   * columns to fill their container based upon the `columnWidth` and `columnGutter` values.\n   * It will never render anything smaller than this width unless its container itself is\n   * smaller than its value. This property is optional if you're using a static `columnCount`.\n   * @default 200\n   */\n  columnWidth?: number\n  /**\n   * This sets the vertical and horizontal space between grid cells in pixels.\n   */\n  columnGutter?: number\n  /**\n   * By default, `usePositioner()` derives the column count from the `columnWidth`, `columnGutter`,\n   * and `width` props. However, in some situations it is nice to be able to override that behavior\n   * (e.g. creating a `List` component).\n   */\n  columnCount?: number\n}\n\n/**\n * Creates a cell positioner for the `useMasonry()` hook. The `usePositioner()` hook uses\n * this utility under the hood.\n *\n * @param columnCount The number of columns in the grid\n * @param columnWidth The width of each column in the grid\n * @param columnGutter The amount of horizontal and vertical space in pixels to render\n *  between each grid item.\n */\nexport const createPositioner = (\n  columnCount: number,\n  columnWidth: number,\n  columnGutter = 0\n): Positioner => {\n  // O(log(n)) lookup of cells to render for a given viewport size\n  // Store tops and bottoms of each cell for fast intersection lookup.\n  const intervalTree = createIntervalTree()\n  // Track the height of each column.\n  // Layout algorithm below always inserts into the shortest column.\n  const columnHeights: number[] = new Array(columnCount)\n  // Used for O(1) item access\n  const items: PositionerItem[] = []\n  // Tracks the item indexes within an individual column\n  const columnItems: number[][] = new Array(columnCount)\n\n  for (let i = 0; i < columnCount; i++) {\n    columnHeights[i] = 0\n    columnItems[i] = []\n  }\n\n  return {\n    columnCount,\n    columnWidth,\n    set: (index, height = 0) => {\n      let column = 0\n\n      // finds the shortest column and uses it\n      for (let i = 1; i < columnHeights.length; i++) {\n        if (columnHeights[i] < columnHeights[column]) column = i\n      }\n\n      const top = columnHeights[column] || 0\n      columnHeights[column] = top + height + columnGutter\n      columnItems[column].push(index)\n      items[index] = {\n        left: column * (columnWidth + columnGutter),\n        top,\n        height,\n        column,\n      }\n      intervalTree.insert(top, top + height, index)\n    },\n    get: (index) => items[index],\n    // This only updates items in the specific columns that have changed, on and after the\n    // specific items that have changed\n    update: (updates) => {\n      const columns: number[] = new Array(columnCount)\n      let i = 0,\n        j = 0\n\n      // determines which columns have items that changed, as well as the minimum index\n      // changed in that column, as all items after that index will have their positions\n      // affected by the change\n      for (; i < updates.length - 1; i++) {\n        const index = updates[i]\n        const item = items[index]\n        item.height = updates[++i]\n        intervalTree.remove(index)\n        intervalTree.insert(item.top, item.top + item.height, index)\n        columns[item.column] =\n          columns[item.column] === void 0\n            ? index\n            : Math.min(index, columns[item.column])\n      }\n\n      for (i = 0; i < columns.length; i++) {\n        // bails out if the column didn't change\n        if (columns[i] === void 0) continue\n        const itemsInColumn = columnItems[i]\n        // the index order is sorted with certainty so binary search is a great solution\n        // here as opposed to Array.indexOf()\n        const startIndex = binarySearch(itemsInColumn, columns[i])\n        const index = columnItems[i][startIndex]\n        const startItem = items[index]\n        columnHeights[i] = startItem.top + startItem.height + columnGutter\n\n        for (j = startIndex + 1; j < itemsInColumn.length; j++) {\n          const index = itemsInColumn[j]\n          const item = items[index]\n          item.top = columnHeights[i]\n          columnHeights[i] = item.top + item.height + columnGutter\n          intervalTree.remove(index)\n          intervalTree.insert(item.top, item.top + item.height, index)\n        }\n      }\n    },\n    // Render all cells visible within the viewport range defined.\n    range: (lo, hi, renderCallback) =>\n      intervalTree.search(lo, hi, (index, top) =>\n        renderCallback(index, items[index].left, top)\n      ),\n    estimateHeight: (itemCount, defaultItemHeight): number => {\n      const tallestColumn = Math.max(0, Math.max.apply(null, columnHeights))\n\n      return itemCount === intervalTree.size\n        ? tallestColumn\n        : tallestColumn +\n            Math.ceil((itemCount - intervalTree.size) / columnCount) *\n              defaultItemHeight\n    },\n    shortestColumn: () => {\n      if (columnHeights.length > 1) return Math.min.apply(null, columnHeights)\n      return columnHeights[0] || 0\n    },\n    size(): number {\n      return intervalTree.size\n    },\n  }\n}\n\nexport interface Positioner {\n  /**\n   * The number of columns in the grid\n   */\n  columnCount: number\n  /**\n   * The width of each column in the grid\n   */\n  columnWidth: number\n  /**\n   * Sets the position for the cell at `index` based upon the cell's height\n   */\n  set: (index: number, height: number) => void\n  /**\n   * Gets the `PositionerItem` for the cell at `index`\n   */\n  get: (index: number) => PositionerItem | undefined\n  /**\n   * Updates cells based on their indexes and heights\n   * positioner.update([index, height, index, height, index, height...])\n   */\n  update: (updates: number[]) => void\n  /**\n   * Searches the interval tree for grid cells with a `top` value in\n   * betwen `lo` and `hi` and invokes the callback for each item that\n   * is discovered\n   */\n  range: (\n    lo: number,\n    hi: number,\n    renderCallback: (index: number, left: number, top: number) => void\n  ) => void\n  /**\n   * Returns the number of grid cells in the cache\n   */\n\n  size: () => number\n  /**\n   * Estimates the total height of the grid\n   */\n\n  estimateHeight: (itemCount: number, defaultItemHeight: number) => number\n  /**\n   * Returns the height of the shortest column in the grid\n   */\n\n  shortestColumn: () => number\n}\n\nexport interface PositionerItem {\n  /**\n   * This is how far from the top edge of the grid container in pixels the\n   * item is placed\n   */\n  top: number\n  /**\n   * This is how far from the left edge of the grid container in pixels the\n   * item is placed\n   */\n  left: number\n  /**\n   * This is the height of the grid cell\n   */\n  height: number\n  /**\n   * This is the column number containing the grid cell\n   */\n  column: number\n}\n\n/* istanbul ignore next */\nconst binarySearch = (a: number[], y: number): number => {\n  let l = 0\n  let h = a.length - 1\n\n  while (l <= h) {\n    const m = (l + h) >>> 1\n    const x = a[m]\n    if (x === y) return m\n    else if (x <= y) l = m + 1\n    else h = m - 1\n  }\n\n  return -1\n}\n\nconst getColumns = (\n  width = 0,\n  minimumWidth = 0,\n  gutter = 8,\n  columnCount?: number\n): [number, number] => {\n  columnCount = columnCount || Math.floor(width / (minimumWidth + gutter)) || 1\n  const columnWidth = Math.floor(\n    (width - gutter * (columnCount - 1)) / columnCount\n  )\n  return [columnWidth, columnCount]\n}\n\nconst emptyArr: [] = []\n","import * as React from 'react'\n\nconst useLatest = <T extends any>(current: T) => {\n  const storedValue = React.useRef(current)\n  storedValue.current = current\n  return storedValue\n}\n\nexport default useLatest\n","import * as React from 'react'\nimport useLayoutEffect from '@react-hook/passive-layout-effect'\nimport useLatest from '@react-hook/latest'\n\nfunction useEvent<\n  T extends Window = Window,\n  K extends keyof WindowEventMap = keyof WindowEventMap\n>(\n  target: Window | null,\n  type: K,\n  listener: WindowEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends Document = Document,\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n>(\n  target: Document | null,\n  type: K,\n  listener: DocumentEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent<\n  T extends HTMLElement = HTMLElement,\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n>(\n  target: React.RefObject<T> | T | null,\n  type: K,\n  listener: ElementEventListener<K>,\n  cleanup?: (...args: any[]) => void\n): void\nfunction useEvent(target: any, type: any, listener: any, cleanup: any): void {\n  const storedListener = useLatest(listener)\n  const storedCleanup = useLatest(cleanup)\n\n  useLayoutEffect(() => {\n    const targetEl = target && 'current' in target ? target.current : target\n    if (!targetEl) return\n\n    let didUnsubscribe = 0\n    function listener(this: any, ...args: any[]) {\n      if (didUnsubscribe) return\n      storedListener.current.apply(this, args)\n    }\n\n    targetEl.addEventListener(type, listener)\n    const cleanup = storedCleanup.current\n\n    return () => {\n      didUnsubscribe = 1\n      targetEl.removeEventListener(type, listener)\n      cleanup && cleanup()\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type])\n}\n\nexport type ElementEventListener<\n  K extends keyof HTMLElementEventMap = keyof HTMLElementEventMap\n> = (this: HTMLElement, ev: HTMLElementEventMap[K]) => any\n\nexport type DocumentEventListener<\n  K extends keyof DocumentEventMap = keyof DocumentEventMap\n> = (this: Document, ev: DocumentEventMap[K]) => any\n\nexport type WindowEventListener<\n  K extends keyof WindowEventMap = keyof WindowEventMap\n> = (this: Document, ev: WindowEventMap[K]) => any\n\nexport default useEvent\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\nimport useEvent from '@react-hook/event'\nimport {useThrottleCallback} from '@react-hook/throttle'\nimport type {Positioner, PositionerItem} from './use-positioner'\n\n/**\n * A hook that creates a callback for scrolling to a specific index in\n * the \"items\" array.\n *\n * @param positioner A positioner created by the `usePositioner()` hook\n * @param options Configuration options\n */\nexport function useScrollToIndex(\n  positioner: Positioner,\n  options: UseScrollToIndexOptions\n) {\n  const {\n    align = 'top',\n    element = typeof window !== 'undefined' && window,\n    offset = 0,\n    height = typeof window !== 'undefined' ? window.innerHeight : 0,\n  } = options\n  const latestOptions = useLatest({\n    positioner,\n    element,\n    align,\n    offset,\n    height,\n  } as const)\n  const getTarget = React.useRef(() => {\n    const latestElement = latestOptions.current.element\n    return latestElement && 'current' in latestElement\n      ? latestElement.current\n      : latestElement\n  }).current\n  const [state, dispatch] = React.useReducer(\n    (\n      state: {\n        position: PositionerItem | undefined\n        index: number | undefined\n        prevTop: number | undefined\n      },\n      action:\n        | {type: 'scrollToIndex'; value: number | undefined}\n        | {type: 'setPosition'; value: PositionerItem | undefined}\n        | {type: 'setPrevTop'; value: number | undefined}\n        | {type: 'reset'}\n    ) => {\n      const nextState = {\n        position: state.position,\n        index: state.index,\n        prevTop: state.prevTop,\n      }\n\n      /* istanbul ignore next */\n      if (action.type === 'scrollToIndex') {\n        return {\n          position: latestOptions.current.positioner.get(action.value ?? -1),\n          index: action.value,\n          prevTop: void 0,\n        }\n      } else if (action.type === 'setPosition') {\n        nextState.position = action.value\n      } else if (action.type === 'setPrevTop') {\n        nextState.prevTop = action.value\n      } else if (action.type === 'reset') {\n        return defaultState\n      }\n\n      return nextState\n    },\n    defaultState\n  )\n  const throttledDispatch = useThrottleCallback(dispatch, 15)\n\n  // If we find the position along the way we can immediately take off\n  // to the correct spot.\n  useEvent(getTarget() as Window, 'scroll', () => {\n    if (!state.position && state.index) {\n      const position = latestOptions.current.positioner.get(state.index)\n\n      if (position) {\n        dispatch({type: 'setPosition', value: position})\n      }\n    }\n  })\n\n  // If the top changes out from under us in the case of dynamic cells, we\n  // want to keep following it.\n  const currentTop =\n    state.index !== void 0 &&\n    latestOptions.current.positioner.get(state.index)?.top\n\n  React.useEffect(() => {\n    const target = getTarget()\n    if (!target) return\n    const {height, align, offset, positioner} = latestOptions.current\n\n    if (state.position) {\n      let scrollTop = state.position.top\n\n      if (align === 'bottom') {\n        scrollTop = scrollTop - height + state.position.height\n      } else if (align === 'center') {\n        scrollTop -= (height - state.position.height) / 2\n      }\n\n      target.scrollTo(0, Math.max(0, (scrollTop += offset)))\n      // Resets state after 400ms, an arbitrary time I determined to be\n      // still visually pleasing if there is a slow network reply in dynamic\n      // cells\n      let didUnsubscribe = false\n      const timeout = setTimeout(\n        () => !didUnsubscribe && dispatch({type: 'reset'}),\n        400\n      )\n      return () => {\n        didUnsubscribe = true\n        clearTimeout(timeout)\n      }\n    } else if (state.index !== void 0) {\n      // Estimates the top based upon the average height of current cells\n      let estimatedTop =\n        (positioner.shortestColumn() / positioner.size()) * state.index\n      if (state.prevTop)\n        estimatedTop = Math.max(estimatedTop, state.prevTop + height)\n      target.scrollTo(0, estimatedTop)\n      throttledDispatch({type: 'setPrevTop', value: estimatedTop})\n    }\n  }, [currentTop, state, latestOptions, getTarget, throttledDispatch])\n\n  return React.useRef((index: number) => {\n    dispatch({type: 'scrollToIndex', value: index})\n  }).current\n}\n\nconst defaultState = {\n  index: void 0,\n  position: void 0,\n  prevTop: void 0,\n} as const\n\nexport type UseScrollToIndexOptions = {\n  /**\n   * The window element or a React ref for the window element. That is,\n   * this is the grid container.\n   * @default window\n   */\n  element?: Window | HTMLElement | React.RefObject<HTMLElement> | null\n  /**\n   * Sets the vertical alignment of the cell within the grid container.\n   * @default \"top\"\n   */\n  align?: 'center' | 'top' | 'bottom'\n  /**\n   * The height of the grid.\n   * @default window.innerHeight\n   */\n  height?: number\n  /**\n   * The vertical space in pixels between the top of the grid container and the top\n   * of the window.\n   * @default 0\n   */\n  offset?: number\n}\n","import * as React from 'react'\nimport {useWindowSize} from '@react-hook/window-size'\nimport {MasonryScroller} from './masonry-scroller'\nimport type {MasonryScrollerProps} from './masonry-scroller'\nimport {useContainerPosition} from './use-container-position'\nimport {useResizeObserver} from './use-resize-observer'\nimport {usePositioner} from './use-positioner'\nimport type {UsePositionerOptions} from './use-positioner'\nimport {useScrollToIndex} from './use-scroll-to-index'\nimport type {UseScrollToIndexOptions} from './use-scroll-to-index'\n\n/**\n * A \"batteries included\" masonry grid which includes all of the implementation details below. This component is the\n * easiest way to get off and running in your app, before switching to more advanced implementations, if necessary.\n * It will change its column count to fit its container's width and will decide how many rows to render based upon\n * the height of the browser `window`.\n */\nexport function Masonry<Item>(props: MasonryProps<Item>) {\n  const containerRef = React.useRef<null | HTMLElement>(null)\n  const windowSize = useWindowSize({\n    initialWidth: props.ssrWidth,\n    initialHeight: props.ssrHeight,\n  })\n  const containerPos = useContainerPosition(containerRef, windowSize)\n  const nextProps = Object.assign(\n    {\n      offset: containerPos.offset,\n      width: containerPos.width || windowSize[0],\n      height: windowSize[1],\n      containerRef,\n    },\n    props\n  ) as any\n  nextProps.positioner = usePositioner(nextProps)\n  nextProps.resizeObserver = useResizeObserver(nextProps.positioner)\n  const scrollToIndex = useScrollToIndex(nextProps.positioner, {\n    height: nextProps.height,\n    offset: containerPos.offset,\n    align:\n      typeof props.scrollToIndex === 'object'\n        ? props.scrollToIndex.align\n        : void 0,\n  })\n  const index =\n    props.scrollToIndex &&\n    (typeof props.scrollToIndex === 'number'\n      ? props.scrollToIndex\n      : props.scrollToIndex.index)\n\n  React.useEffect(() => {\n    if (index !== void 0) scrollToIndex(index)\n  }, [index, scrollToIndex])\n\n  return React.createElement(MasonryScroller, nextProps)\n}\n\nexport interface MasonryProps<Item>\n  extends Omit<\n      MasonryScrollerProps<Item>,\n      'offset' | 'width' | 'height' | 'containerRef' | 'positioner'\n    >,\n    Pick<UsePositionerOptions, 'columnWidth' | 'columnGutter' | 'columnCount'> {\n  /**\n   * Scrolls to a given index within the grid. The grid will re-scroll\n   * any time the index changes.\n   */\n  scrollToIndex?:\n    | number\n    | {\n        index: number\n        align: UseScrollToIndexOptions['align']\n      }\n  /**\n   * This is the width that will be used for the browser `window` when rendering this component in SSR.\n   * This prop isn't relevant for client-side only apps.\n   */\n  ssrWidth?: number\n  /**\n   * This is the height that will be used for the browser `window` when rendering this component in SSR.\n   * This prop isn't relevant for client-side only apps.\n   */\n  ssrHeight?: number\n  /**\n   * This determines how often (in frames per second) to update the scroll position of the\n   * browser `window` in state, and as a result the rate the masonry grid recalculates its visible cells.\n   * The default value of `12` has been very reasonable in my own testing, but if you have particularly\n   * heavy `render` components it may be prudent to reduce this number.\n   * @default 12\n   */\n  scrollFps?: number\n}\n\nif (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n  Masonry.displayName = 'Masonry'\n}\n","import * as React from 'react'\nimport {Masonry} from './masonry'\nimport type {MasonryProps} from './masonry'\n\n/**\n * This is just a single-column `<Masonry>` component with `rowGutter` prop instead of\n * a `columnGutter` prop.\n */\nexport function List<Item>(props: ListProps<Item>) {\n  return (\n    <Masonry<Item>\n      role='list'\n      columnGutter={props.rowGutter}\n      columnCount={1}\n      columnWidth={1}\n      {...props}\n    />\n  )\n}\n\nexport interface ListProps<Item>\n  extends Omit<\n    MasonryProps<Item>,\n    'columGutter' | 'columnCount' | 'columnWidth'\n  > {\n  /**\n   * The amount of vertical space in pixels to add between the list cells.\n   * @default 0\n   */\n  rowGutter?: number\n}\n\nif (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') {\n  List.displayName = 'List'\n}\n","import * as React from 'react'\nimport useLatest from '@react-hook/latest'\n\n/**\n * A utility hook for seamlessly adding infinite scroll behavior to the `useMasonry()` hook. This\n * hook invokes a callback each time the last rendered index surpasses the total number of items\n * in your items array or the number defined in the `totalItems` option.\n *\n * @param loadMoreItems This callback is invoked when more rows must be loaded. It will be used to\n *  determine when to refresh the list with the newly-loaded data. This callback may be called multiple\n *  times in reaction to a single scroll event, so it's important to memoize its arguments. If you're\n *  creating this callback inside of a functional component, make sure you wrap it in `React.useCallback()`,\n *  as well.\n * @param options\n */\nexport function useInfiniteLoader<Item, T extends LoadMoreItemsCallback<Item>>(\n  loadMoreItems: T,\n  options: UseInfiniteLoaderOptions<Item> = emptyObj\n): LoadMoreItemsCallback<Item> {\n  const {\n    isItemLoaded,\n    minimumBatchSize = 16,\n    threshold = 16,\n    totalItems = 9e9,\n  } = options\n  const storedLoadMoreItems = useLatest(loadMoreItems)\n  const storedIsItemLoaded = useLatest(isItemLoaded)\n\n  return React.useCallback(\n    (startIndex, stopIndex, items) => {\n      const unloadedRanges = scanForUnloadedRanges(\n        storedIsItemLoaded.current,\n        minimumBatchSize,\n        items,\n        totalItems,\n        Math.max(0, startIndex - threshold),\n        Math.min(totalItems - 1, (stopIndex || 0) + threshold)\n      )\n      // The user is responsible for memoizing their loadMoreItems() function\n      // because we don't want to make assumptions about how they want to deal\n      // with `items`\n      for (let i = 0; i < unloadedRanges.length - 1; ++i)\n        storedLoadMoreItems.current(\n          unloadedRanges[i],\n          unloadedRanges[++i],\n          items\n        )\n    },\n    [\n      totalItems,\n      minimumBatchSize,\n      threshold,\n      storedLoadMoreItems,\n      storedIsItemLoaded,\n    ]\n  )\n}\n\n/**\n * Returns all of the ranges within a larger range that contain unloaded rows.\n */\nfunction scanForUnloadedRanges<Item>(\n  isItemLoaded: UseInfiniteLoaderOptions<\n    Item\n  >['isItemLoaded'] = defaultIsItemLoaded,\n  minimumBatchSize: UseInfiniteLoaderOptions<Item>['minimumBatchSize'] = 16,\n  items: any[],\n  totalItems: UseInfiniteLoaderOptions<Item>['totalItems'] = 9e9,\n  startIndex: number,\n  stopIndex: number\n): number[] {\n  const unloadedRanges: number[] = []\n  let rangeStartIndex: number | undefined,\n    rangeStopIndex: number | undefined,\n    index = startIndex\n\n  /* istanbul ignore next */\n  for (; index <= stopIndex; index++) {\n    if (!isItemLoaded(index, items)) {\n      rangeStopIndex = index\n      if (rangeStartIndex === void 0) rangeStartIndex = index\n    } else if (rangeStartIndex !== void 0 && rangeStopIndex !== void 0) {\n      unloadedRanges.push(rangeStartIndex, rangeStopIndex)\n      rangeStartIndex = rangeStopIndex = void 0\n    }\n  }\n\n  // If :rangeStopIndex is not null it means we haven't run out of unloaded rows.\n  // Scan forward to try filling our :minimumBatchSize.\n  if (rangeStartIndex !== void 0 && rangeStopIndex !== void 0) {\n    const potentialStopIndex = Math.min(\n      Math.max(rangeStopIndex, rangeStartIndex + minimumBatchSize - 1),\n      totalItems - 1\n    )\n\n    /* istanbul ignore next */\n    for (index = rangeStopIndex + 1; index <= potentialStopIndex; index++) {\n      if (!isItemLoaded(index, items)) {\n        rangeStopIndex = index\n      } else {\n        break\n      }\n    }\n\n    unloadedRanges.push(rangeStartIndex, rangeStopIndex)\n  }\n\n  // Check to see if our first range ended prematurely.\n  // In this case we should scan backwards to try filling our :minimumBatchSize.\n  /* istanbul ignore next */\n  if (unloadedRanges.length) {\n    let firstUnloadedStart = unloadedRanges[0]\n    const firstUnloadedStop = unloadedRanges[1]\n\n    while (\n      firstUnloadedStop - firstUnloadedStart + 1 < minimumBatchSize &&\n      firstUnloadedStart > 0\n    ) {\n      const index = firstUnloadedStart - 1\n\n      if (!isItemLoaded(index, items)) {\n        unloadedRanges[0] = firstUnloadedStart = index\n      } else {\n        break\n      }\n    }\n  }\n\n  return unloadedRanges\n}\n\nconst defaultIsItemLoaded = <Item>(index: number, items: Item[]): boolean =>\n  items[index] !== void 0\n\nexport interface UseInfiniteLoaderOptions<Item> {\n  /**\n   *  A callback responsible for determining the loaded state of each item. Should return `true`\n   * if the item has already been loaded and `false` if not.\n   * @default (index: number, items: any[]) => boolean\n   */\n  isItemLoaded?: (index: number, items: Item[]) => boolean\n  /**\n   * The minimum number of new items to be loaded at a time.  This property can be used to\n   * batch requests and reduce HTTP requests.\n   * @default 16\n   */\n  minimumBatchSize?: number\n  /**\n   * The threshold at which to pre-fetch data. A threshold X means that new data should start\n   * loading when a user scrolls within X cells of the end of your `items` array.\n   * @default 16\n   */\n  threshold?: number\n  /**\n   * The total number of items you'll need to eventually load (if known). This can\n   * be arbitrarily high if not known.\n   * @default 9e9\n   */\n  totalItems?: number\n}\n\nexport type LoadMoreItemsCallback<Item> = (\n  startIndex: number,\n  stopIndex: number,\n  items: Item[]\n) => any\n\nconst emptyObj = {}\n"],"names":["useLatest","current","storedValue","React","useDebounceCallback","callback","wait","leading","storedCallback","timeout","deps","clearTimeout","args","arguments","setTimeout","apply","useDebounce","initialState","state","usePassiveLayoutEffect","document","createElement","useEvent","target","type","listener","cleanup","noop","storedListener","storedCleanup","useLayoutEffect","targetEl","addEventListener","removeEventListener","emptyObj","win","window","getSize","documentElement","clientWidth","clientHeight","useWindowSize","options","initialWidth","initialHeight","size","setDebouncedSize","setSize","perf","performance","Date","now","useThrottleCallback","fps","ms","prev","trailingTimeout","clearTrailing","rightNow","call","useThrottle","getScrollY","scrollY","pageYOffset","useWindowScroll","u","p","af","Caf","Raf","raf","bind","caf","h","lastTime","curr","next","Math","max","clearRequestTimeout","handle","v","requestTimeout","fn","start","loop","useScroller","offset","scrollTop","useScrollPosition","isScrolling","setIsScrolling","didMount","to","createCache","obj","e","cache","set","k","get","memo","constructors","depth","length","baseCache","base","map","i","node","one","g1","s1","value","g2","s2","g","s","memoize","mapConstructors","item","OneKeyMap","key","val","memoOne","areEqual","equal","defaultAreEqual","elementsCache","WeakMap","useForceUpdate","setState","useMasonry","positioner","resizeObserver","items","as","ContainerComponent","id","className","style","role","tabIndex","containerRef","itemAs","ItemComponent","itemStyle","itemHeightEstimate","itemKey","defaultGetItemKey","overscanBy","height","RenderComponent","render","onRender","startIndex","stopIndex","forceUpdate","setItemRef","getRefSetter","itemCount","columnWidth","columnCount","range","estimateHeight","shortestColumn","measuredCount","shortestColumnSize","children","itemRole","undefined","storedOnRender","rangeEnd","needsFreshBatch","index","left","top","data","phaseTwoStyle","width","writingMode","position","process","throwWithoutData","push","createRenderElement","min","batchSize","ceil","phaseOneStyle","getCachedSize","didEverMount","containerStyle","getContainerStyle","assignUserStyle","Error","trieMemoize","memoizeOne","maxWidth","maxHeight","willChange","pointerEvents","cmp2","pargs","userStyle","_","zIndex","visibility","el","observe","offsetHeight","MasonryScroller","props","scrollFps","displayName","useContainerPosition","elementRef","emptyArr","containerPosition","setContainerPosition","offsetTop","offsetParent","offsetWidth","getIndex","arr","result","some","entry","class_1","__entries__","entries","splice","ctx","_i","_a","Object","defineProperty","prototype","enumerable","configurable","delete","has","clear","forEach","MapShim","Map","isBrowser","global$1","global","self","Function","requestAnimationFrame$1","requestAnimationFrame","throttle","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","REFRESH_DELAY","transitionKeys","mutationObserverSupported","MutationObserver","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","refresh","observer","indexOf","connect_","observers","disconnect_","changesDetected","updateObservers_","gatherActive","hasActive","broadcastActive","activeObservers","filter","attributes","childList","characterData","subtree","disconnect","_b","propertyName","isReflowProperty","instance_","addObserver","removeObserver","getInstance","defineConfigurable","keys","writable","getWindowOf","ownerGlobal","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","parseFloat","getBordersSize","styles","positions","reduce","getPaddings","paddings","positions_1","getSVGContentRect","bbox","getBBox","getHTMLElementContentRect","getComputedStyle","horizPad","right","vertPad","bottom","boxSizing","round","isDocumentElement","vertScrollbar","horizScrollbar","abs","SVGGraphicsElement","SVGElement","isSVGGraphicsElement","getContentRect","createReadOnlyRect","x","y","Constr","DOMRectReadOnly","rect","create","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","isActive","broadcastRect","ResizeObserverEntry","rectInit","contentRect","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","clearActive","_this","observation","unobserve","ResizeObserver","method","rafSchd","lastArgs","frameId","wrapperFn","_len","Array","_key","cancel","cancelAnimationFrame","useResizeObserver","createResizeObserver","updater","handleEntries","updates","update","ro","RED","BLACK","NIL","DELETE","KEEP","addInterval","treeNode","high","list","prevNode","removeInterval","NULL_NODE","low","C","P","R","L","updateMax","updateMaxUp","rotateLeft","tree","root","rotateRight","replaceNode","fixRemove","w","minimumTree","fixInsert","z","createIntervalTree","indexMap","insert","remove","intervalResult","originalYColor","search","stack","pop","usePositioner","columnGutter","initPositioner","getColumns","computedColumnWidth","computedColumnCount","createPositioner","positionerRef","prevDeps","opts","prevOpts","optsChanged","every","prevPositioner","cacheSize","pos","intervalTree","columnHeights","columnItems","column","columns","j","itemsInColumn","binarySearch","startItem","lo","hi","renderCallback","defaultItemHeight","tallestColumn","a","l","m","minimumWidth","gutter","floor","didUnsubscribe","useScrollToIndex","align","element","innerHeight","latestOptions","getTarget","latestElement","action","nextState","prevTop","defaultState","dispatch","throttledDispatch","currentTop","scrollTo","estimatedTop","Masonry","windowSize","ssrWidth","ssrHeight","containerPos","nextProps","scrollToIndex","__reactCreateElement__","List","rowGutter","useInfiniteLoader","loadMoreItems","isItemLoaded","minimumBatchSize","threshold","totalItems","storedLoadMoreItems","storedIsItemLoaded","unloadedRanges","scanForUnloadedRanges","defaultIsItemLoaded","rangeStartIndex","rangeStopIndex","potentialStopIndex","firstUnloadedStart","firstUnloadedStop"],"mappings":"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"}